<launch>
  <include file="$(find rosbridge_server)/launch/rosbridge_websocket.launch"/>
  <include file="$(find arlobot_ros)/launch/minimal.launch"/>
  <include file="$(find arlobot_ros)/launch/arlobot_goto.launch"/>
  <arg name="loadJoystick" value="$(optenv HAS_XBOX_JOYSTICK false)"/>
  <group if="$(arg loadJoystick)">
    <include file="$(find turtlebot_teleop)/launch/xbox360_teleop.launch"/>
  </group>

  <arg name="3d_sensor"
       default="$(optenv ARLOBOT_3D_SENSOR none)"/>  <!-- kinect, asus_xtion_pro -->

  <!-- TODO: This should BRING UP any and ALL "lidar" units,-->
  <!-- TODO: BUT, it should ONLY MAP ONE to the /scan topic for mapping.-->
  <!-- TODO: the rest should just be available to view in RVIZ.-->

  <!--  NOTE: ONLY the Asus OR Kinect can be brought up, NOT BOTH.-->
  <arg name="loadAsusXtion" value="$(optenv HAS_ASUS_XTION false)"/>
  <group if="$(arg loadAsusXtion)">
    <include file="$(find arlobot_ros)/launch/3dsensor.launch">
      <arg name="ir_processing" value="false"/>
      <arg name="depth_processing" value="false"/>
      <arg name="depth_registered_processing" value="false"/>
      <arg name="disparity_processing" value="false"/>
      <arg name="disparity_registered_processing" value="false"/>
      <arg name="scan_processing" value="true"/>
      <arg name="3d_sensor" value="asus_xtion_pro"/>
      <arg name="scan_topic" value="asus_xtion_pro"/>
    </include>
  </group>

  <arg name="loadKinect" value="$(optenv HAS_KINECT false)"/>
  <group if="$(arg loadKinect)">
    <include file="$(find arlobot_ros)/launch/3dsensor.launch">
      <arg name="ir_processing" value="false"/>
      <arg name="depth_processing" value="false"/>
      <arg name="depth_registered_processing" value="false"/>
      <arg name="disparity_processing" value="false"/>
      <arg name="disparity_registered_processing" value="false"/>
      <arg name="scan_processing" value="true"/>
      <arg name="3d_sensor" value="kinect"/>
      <arg name="scan_topic" value="kinect"/>
    </include>
  </group>

  <arg name="loadxv11" value="$(optenv HAS_XV11 false)"/>
  <group if="$(arg loadxv11)">
    <include file="$(find arlobot_ros)/launch/xv11.launch"/>
  </group>

  <arg name="loadScanseSweep" value="$(optenv HAS_SCANSE_SWEEP false)"/>
  <group if="$(arg loadScanseSweep)">
    <include file="$(find arlobot_ros)/launch/sweep.launch"/>
  </group>

  <arg name="loadRPLIDAR" value="$(optenv HAS_RPLIDAR false)"/>
  <group if="$(arg loadRPLIDAR)">
    <include file="$(find arlobot_ros)/launch/rplidar.launch"/>
  </group>

</launch>
